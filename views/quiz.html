<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Quiz Application</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="#">Navbar</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <ul class="navbar-nav">
            <li class="nav-item active">
              <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Features</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Pricing</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Dropdown link
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                <a class="dropdown-item" href="#">Action</a>
                <a class="dropdown-item" href="#">Another action</a>
                <a class="dropdown-item" href="#">Something else here</a>
              </div>
            </li>
          </ul>
        </div>
      </nav>
    <div class="container mt-5">
        <div class="card quiz-card">
            <div class="card-header text-center">
                <h2>Online Quiz</h2>
                <div class="progress mt-3">
                    <div class="progress-bar" role="progressbar" style="width: 0%;" id="progressBar"></div>
                </div>
            </div>
            <div class="card-body">
                <!-- <form id="quizForm">
                    <div id="questionContainer"></div>
                    <button type="button" class="btn btn-primary btn-block mt-3" id="nextButton" onclick="showNext()">Next</button>
                    <button type="submit" class="btn btn-success btn-block mt-3" id="submitButton" style="display: none;">Submit</button>
                </form> -->
                <h2 class="question">Question </h2>
                <div class="choice-container">
                    <div ><button class="btn btn-primary choices unselected" id="choice-1">A</button></div>
                    <div ><button class="btn btn-primary choices unselected" id="choice-2">B</button></div>
                    <div ><button class="btn btn-primary choices unselected" id="choice-3">C</button></div>
                    <div ><button class="btn btn-primary choices unselected" id="choice-4">D</button></div>
                </div>
                <div class="result"></div>
                <button type="'submit" class="btn btn-success submit">Next</button>

            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        let currentQuestion = 0;
//         const questions = [
//     ["What is the capital of France?", "Berlin", "Madrid", "Paris", "Rome", 2],
//     ["What is the largest planet in our solar system?", "Earth", "Jupiter", "Mars", "Venus", 1],
//     ["Who wrote 'To Kill a Mockingbird'?", "Mark Twain", "Harper Lee", "J.K. Rowling", "Ernest Hemingway", 1],
//     ["Which element has the chemical symbol 'O'?", "Gold", "Oxygen", "Osmium", "Oganesson", 1],
//     ["What is the speed of light?", "299,792 km/s", "300,000 km/s", "150,000 km/s", "299,792,458 m/s", 3],
//     ["Which planet is known as the Red Planet?", "Earth", "Mars", "Jupiter", "Saturn", 1],
//     ["Who is the author of '1984'?", "Aldous Huxley", "George Orwell", "Ray Bradbury", "Isaac Asimov", 1],
//     ["What is the hardest natural substance on Earth?", "Gold", "Iron", "Diamond", "Platinum", 2],
//     ["What is the square root of 64?", "6", "7", "8", "9", 2],
//     ["What is the chemical formula for water?", "H2O", "CO2", "O2", "H2SO4", 0]
// ];
const questions = [
    ["What is the capital of France?", "Berlin", "Madrid", "Paris", "Rome", 2],
    ["What is the largest planet in our solar system?", "Earth", "Jupiter", "Mars", "Venus", 1],
    ]; 
const showQuestion = () => {
    let question = questions[currentQuestion]; 
    console.log(question)
    document.querySelector('.question').innerHTML = question[0]; 
    document.querySelectorAll('.choices').forEach((e, ind)=>{
        e.innerHTML = question[ind+1]
    })
    currentQuestion++; 
};
showQuestion();
    
    const nextQuestion = ()=>{
        showQuestion(); 
        updateProgressBar(currentQuestion); 
    }
    let userChoice = [];
    document.querySelectorAll('.choices').forEach( (e, ind)=>{
        e.addEventListener('click', ()=>
        {
            userChoice[currentQuestion-1] = e.id; 
            console.log(userChoice);
            document.querySelectorAll('.choices').forEach( (e, ind) =>{
                if(parseInt(userChoice[currentQuestion-1].split('-')[1])-1 == ind)
                {
                    e.classList.remove('unselected');
                    e.classList.add('selected');
                }
                else
                {
                    e.classList.remove('selected');
                    e.classList.add('unselected');
                }  
            })
        })
    })
    const evaluate = ()=>{
        let correct = 0; 
        userChoice.forEach((item, ind)=>{
            if(parseInt(item.split('-')[1]) == (questions[ind][5]+1))
                correct++; 
        });
        console.log(correct);
        document.querySelector('.result').innerHTML = `The number of correct answers are ${correct} out of ${questions.length} !`; 
        document.querySelector('.result').style.display = 'block';
    }
    var submit = document.querySelector('.submit')
    console.log(submit);
    submit.addEventListener('click', ()=>{
        document.querySelectorAll('.choices').forEach( (e, ind) =>{
            e.classList.remove('selected');
            e.classList.add('unselected')
        })
        if(currentQuestion == questions.length-1)
            submit.innerHTML = 'Submit'
        if(currentQuestion < questions.length)
            nextQuestion();
        else 
            evaluate(); 

    })

        function updateProgressBar(index) {
            const progressBar = document.getElementById('progressBar');
            const percentage = ((index + 1) / questions.length) * 100;
            progressBar.style.width = percentage + '%';
        }
    </script>
</body>
</html>
